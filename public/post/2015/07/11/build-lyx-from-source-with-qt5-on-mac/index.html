<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Build lyx from source with qt5 on Mac | Lanfeng Pan&#39;s Random Walk</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Build lyx from source with qt5 on Mac</span></h1>

<h2 class="date">2015/07/11</h2>
</div>

<main>


<p>The stable lyx release looks terrible on retina screen. The on working version 2.2 will support high resolution display but it will not be available in a short time. Building from source is the only option if one cannot bear with the blurry font.</p>

<p>Download the lyx source and install qt5.</p>

<pre><code class="language-bash">$ git clone git://git.lyx.org/lyx
$ brew install qt5
</code></pre>

<p>Some other library may be needed, such as libmagic, automake, autoconf and gettext.</p>

<pre><code class="language-bash">$ brew install libmagic
</code></pre>

<p>Create an empty folder <code>build</code> under the directory where you put lyx on. Go to <code>build</code> and run</p>

<pre><code class="language-bash">$../lyx/autogen.sh
$../lyx/configure -with-version-suffix=-2.X --enable-qt5 \
 --enable-cxx11 CPPFLAGS=-I/usr/local/opt/qt5/include \
  LDFLAGS=-L/usr/local/opt/qt5/lib
</code></pre>

<p>Or</p>

<pre><code class="language-bash">$ ../lyx/autogen.sh
$ ../lyx/configure -with-version-suffix=-2.X --enable-qt5 \
 --with-qt-dir=/usr/local/opt/qt5 \
  --with-qt-includes=/usr/local/opt/qt5/include \
   --with-qt-libraries=/usr/local/opt/qt5/lib --enable-cxx11
</code></pre>

<p><code>--enable-qt5</code> may not be required if you don&rsquo;t have both qt4 and qt5 installed. <code>--enable-cxx11</code> is added to avoid the error of ambiguous <code>next</code>. <code>--with-version-suffix</code> adds a suffix on the App name so you can still keep a stable version lyx.</p>

<p>For the first time, you need to start lyx by running</p>

<pre><code class="language-bash">$ /Applications/LyX-2.X.app/Contents/MacOS/lyx
</code></pre>

<p>After that it works well. The font looks nice. The math equations are better but still a little blurred.</p>

<p>My system is OS X 10.10.4. The discussion <a href="http://www.mail-archive.com/lyx-devel@lists.lyx.org/msg188282.html">here</a> helps me to figure out options needed by configure.</p>

<h2 id="update">Update</h2>

<p>Lyx 2.2.0 has already released and it supports retina display. So this solution is no longer necessary.</p>

</main>

  <footer>
  <script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  
  <hr/>
  &copy; <a href="https://lanfeng.me">Lanfeng Pan</a> | <a href="https://github.com/panlanfeng">Github</a>
  
  </footer>
  </body>
</html>

