<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Some ideas about grammar of statistics language | A minimal Hugo website</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Some ideas about grammar of statistics language</span></h1>
<h2 class="author">&lt;a href=&#34;http://panlanfeng.github.io/&#34;&gt;Lanfeng&lt;/a&gt;</h2>

</div>

<main>
<p>Many problems, such as some in Philosophy, are difficult because it is hard to state them clearly. A powerful language system improves people&rsquo;s ability to solve complicated problems.</p>

<p>R is almost a statistics language. Sometimes it helps to think in R commands. For example, <code>pnorm(2.5, 2, 4)</code>, <code>qt(.975, 20)</code> is more intuitive than mathematical notations. And <code>by</code>, <code>*ply</code> functions will help to think about matrix computations.</p>

<p>It is a good idea to melt programming language and mathematical language together. Sentences, or code can help to understand and can be run at the same time. This requires a programming language to be very expressive. R is far from enough.</p>

<p>I want R to support <code>dat[x1==1, ]</code>. It&rsquo;s better than <code>dat[dat$x1==1, ]</code>. And also I hope I can use  <code>|</code> as conditioning, for example <code>mean(y|x)</code> where <code>x</code> is a category vector. I don&rsquo;t know how to implement this two functions in R.</p>

<p>There is no sum of squares function in R. In linear model, this is the most basic function. So I write a few piece of codes to make life easier, such as functions to calculate <code>MS(y|x) = [E(y|x) - E(y)] ^ 2</code>.</p>

<p>In the following code, <code>MS(y|x)</code> is <code>ss(project(y, x)) / (nleves(x) - 1)</code>.</p>

<pre><code class="language-r">#compute sum of squares
ss=function(x, na.rm=FALSE){
    sum((x - mean(x)) ^ 2, na.rm=na.rm)
}

# Compute the projection of y given x. Currently y can only be numeric.
# Note: When calculating the ss for interaction terms, we need to remove the contribution of linear parts.

project=function(y, x){
    if(!is.numeric(y))
        print(&quot;sorry, method for project factors is still under developing&quot;)
    if(is.character(x))
        x &lt;- as.factor(x)
    if(is.list(x)){
        x=interaction(x, sep=&quot;&quot;)
    }
    if(is.factor(x)){
        projected.values &lt;- tapply(y, x, mean)
        projection &lt;- x
        levels(projection) &lt;- projected.values
        projection &lt;- as.numeric(as.character(projection))
        return(projection)
    }
    if(is.numeric(x)){
        x = as.matrix(x)
        y = as.matrix(y)
        return(x %*% solve(crossprod(x)) %*% t(x) %*% y)
    }
}
</code></pre>

</main>

  <footer>
  <script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  
  <hr/>
  &copy; <a href="https://yihui.name">Yihui Xie</a> 2017 &ndash; 2019 | <a href="https://github.com/yihui">Github</a> | <a href="https://twitter.com/xieyihui">Twitter</a>
  
  </footer>
  </body>
</html>

